<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@page trimDirectiveWhitespaces="true" %>
<%@ include file="../tagLib.jsp"%>
<%
if(null == session.getAttribute("channelId"))
    session.setAttribute("channelId","3011_40060000000");
%>
<!DOCTYPE html>
<!--[if lt IE 7]>
<html lang="en" ng-app="lovevApp" ng-strict-di class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html lang="en" ng-app="lovevApp" ng-strict-di class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html lang="en" ng-app="lovevApp" ng-strict-di class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en" ng-app="lovevApp" ng-strict-di class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="format-detection" content="telephone=no">
    <meta content="yes" name="apple-touch-fullscreen"/>
    <link href="static/imgs/h5_57.png" sizes="57x57" rel="apple-touch-icon">
    <title>和视界</title>
    <link rel="stylesheet" href="static/css/share.css"/>
    <link rel="stylesheet" href="static/css/loading-bar.min.css"/>
    <!--============滑动类库===========-->
    <script type="text/javascript" src="${resourceUrl}/static/libs/TouchSlide.js"></script>
    <!--==============第三方类库==========-->
    <script type="text/javascript" src="${resourceUrl}/static/libs/idangerous.swiper-1.9.1.min.js"></script>
    <script type="text/javascript" src="${resourceUrl}/static/libs/angular/angular.min.js"></script>
    <script type="text/javascript" src="${resourceUrl}/static/libs/angularRoute/angular-route.min.js"></script>
    <script type="text/javascript" src="${resourceUrl}/static/libs/ng-infinite-scroll.js"></script>
    <script type="text/javascript" src="${resourceUrl}/static/libs/angularLoader/angular-loading-bar.min.js"></script>
    <script type="text/javascript" src="${resourceUrl}/static/libs/angularTouch/angular-touch.min.js"></script>
    <!--============组件============-->
    <script type="text/javascript" src="${resourceUrl}/components/interact/interact.js"></script>
    <script type="text/javascript" src="${resourceUrl}/components/utils/uitls.js"></script>
    <script type="text/javascript" src="${resourceUrl}/components/search/search.js"></script>
    <script type="text/javascript" src="${resourceUrl}/components/user/user.js"></script>
    <script type="text/javascript" src="${resourceUrl}/components/video/video.js"></script>
    <script type="text/javascript" src="${resourceUrl}/components/utils/directives.js"></script>
    <script type="text/javascript" src="${resourceUrl}/components/utils/filters.js"></script>

    <script type="text/javascript" src="${resourceUrl}/views/level1/level1.js"></script>
    <script type="text/javascript" src="${resourceUrl}/views/level2/level2.js"></script>
    <script type="text/javascript" src="${resourceUrl}/views/videoDetails/videoDetails.js"></script>
    <script type="text/javascript" src="${resourceUrl}/views/watchFilmTeam/watchFilmTeam.js"></script>
    <script type="text/javascript" src="${resourceUrl}/views/liveTelecast/liveTelecast.js"></script>
    <script type="text/javascript" src="${resourceUrl}/views/order/order.js"></script>
    <script type="text/javascript" src="${resourceUrl}/views/search/search.js"></script>
    <script type="text/javascript" src="${resourceUrl}/views/login/login.js"></script>
    <script type="text/javascript" src="${resourceUrl}/views/register/register.js"></script>
    <script type="text/javascript" src="${resourceUrl}/views/userCenter/userCenter.js"></script>

    <script type="text/javascript" src="${resourceUrl}/views/interact/interact.js"></script>
    <script type="text/javascript" src="${resourceUrl}/app.js"></script>
    <style>
        .view-container {
            /*position: relative;*/
        }

        .view-frame.ng-enter, .view-frame.ng-leave {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
        }

        .view-frame.ng-enter {
            -webkit-animation: 0.5s fade-in;
            -moz-animation: 0.5s fade-in;
            -o-animation: 0.5s fade-in;
            animation: 0.5s fade-in;
            z-index: 100;
        }

        .view-frame.ng-leave {
            -webkit-animation: 0.5s fade-out;
            -moz-animation: 0.5s fade-out;
            -o-animation: 0.5s fade-out;
            animation: 0.5s fade-out;
            z-index:99;
        }

        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @-moz-keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @-webkit-keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fade-out {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        @-moz-keyframes fade-out {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        @-webkit-keyframes fade-out {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        .mn-auto-remove{
            -webkit-transition:opacity ease 1s;
            transition:opacity ease 1s;
        }
        .mn-auto-removing{
            opacity: 0 !important;
        }
    </style>
    <script type="text/css" id="transformPopup">
        .filter-area{
            -webkit-transition:-webkit-transform cubic-bezier(.645,.045,.355,1) .5s;
            transition:transform cubic-bezier(.645,.045,.355,1) .5s;
            opacity:0.9;
            height: 200px;
            overflow: hidden;
            z-index: 1;
            position: fixed;
            top: -115px;
            width:100%;
        }
        .filter-area.drama{
            height: 127px;;
            top: -42px;
        }
        .filter-area.free{
            height: 52px;;
            top: -75px;
        }
        .filter-area.show{
            -webkit-transform:translate3d(0,200px,0);
            transform:translate3d(0,200px,0);
        }
        .filter-area.drama.show, .filter-area.free.show{
            -webkit-transform:translate3d(0,127px,0);
            transform:translate3d(0,127px,0);
        }
    </script>
    <script type="text/css" id="topPopup">
        .filter-area{
            -webkit-transition:top cubic-bezier(.645,.045,.355,1) .5s;
            transition:top cubic-bezier(.645,.045,.355,1) .5s;
            opacity:0.9;
            height: 200px;
            overflow: hidden;
            z-index: 1;
            position: fixed;
            top: -115px;
            width:100%;
        }
        .filter-area.drama{
            height: 127px;;
            top: -42px;
        }
        .filter-area.free{
            height: 52px;;
            top: -75px;
        }
        .filter-area.show{
            top:85px;
        }
    </script>
    <script>
        var ua = navigator.userAgent;
        var useNgViewAnimation = /(iPad|iPhone|iPod)/.test( ua ) ||
                /chrome/i.test(ua) ||
                /baidubrowser/i.test(ua);
        var useTopToMenuPopup  = /mqqbrowser/i.test(ua) || /360browser/i.test(ua);
        var popupStyle = document.getElementById(useTopToMenuPopup ? 'topPopup' : 'topPopup');/*transformPopup*/

        if (useNgViewAnimation) {
            document.write('<script type="text/javascript" src="${resourceUrl}/static/libs/angularAnimate/angular-animate.min.js"><\/script>');
        } else {
            angular.module('ngAnimate',[]);
        }
        document.write('<style>' + popupStyle.text + '<\/style>');
    </script>
</head>
<body>
<header class="header" ng-hide="headerHide">
    <div class="top">
        <a class="logo" href="#/level1"></a>
        <a class="search" href="#/search"></a>
        <a ng-class="{history:isLogin}" href="#/userCenter/history"></a>
        <a class="person" href="#/userCenter"></a>
    </div>
    <div class="swiper-container swiper-scroll-container nav_con" ng-show="headNavShow">
        <div class="swiper-wrapper" >
            <div class="swiper-slide sub_nav">
                <cms:nodecont var="navs" nodeid="70000010" sortKey="ranking" dataobjectid="1" sortType="desc"/>
                <c:forEach var="item" items="${navs}">
                    <a href="${item.fields.REDREICT_URL}" ng-class="{cur:'${item.fields.NAME}'==channel}">${item.name}</a>
                </c:forEach>
            </div>
        </div>
    </div>
</header>

<div class="view-container">
    <section id="main-wrapper" class="view-frame" ng-view>

    </section>
</div>
<!-- ===底部=== -->
<footer class="footer" ng-hide="footerHide">
    <div class="footer-list">
        <a href="#/about">关于</a><span>|</span>
        <a href="#/feedback">反馈</a><span>|</span>
        <a href="${resourceUrl}/views/interact/serviceOnline.jsp">客服</a><span>|</span>
        <a href="#/downLoad">APP下载</a><span>|</span>
        <a href="javascript:" ng-click="toTop()">返回顶部</a>
    </div>
    <span class="footer-line"></span>
    <p>www.lovev.com</p>
    <p>China Mobile Copyright 2013 中国移动版权所有</p>
</footer>

<a target="_self" mn-auto-remove href="#/downLoad" style="position:fixed;bottom:0;left:0;z-index:1000;background:#414c6e;opacity:0.8;width:100%; max-height:100px;display:block; text-align:center;">
    <img style=" width:100%; max-width:720px; max-height:100px;" src="${resourceUrl}/static/imgs/bottom01.png">
</a>
<%
request.setAttribute("host", request.getHeader("Host"));
%>
<c:if test="${fn:indexOf(host,'preview') == 0}">
    <div id="mn-console" style="display: -webkit-box;-webkit-box-orient: vertical;width: 100%; height: 0; z-index: 9999; position: fixed; bottom: 0; opacity: 0.87; background: rgb(39, 42, 44);">
        <div id="console-show-button" style="height: 33px;width:100px;background: #010218;position: absolute;left: 50%;margin-left: -50px;border-radius: 5px 5px 0 0;top: -33px;"></div>
        <div id="console-result" style="-webkit-box-flex:1;padding:20px;overflow-y: scroll;border-width: thin;border-style: inset;"></div>
        <div style="height: 100px;margin: 0 auto;">
            <textarea id="console-command" style="width:100%;overflow-y: scroll;border-width: thin;height: 100px;border-style: inset;"></textarea>
        </div>
        <div style="height: 30px;text-align: center;position:relative;">
            <button id="console-run" style="height: 100%;width:100px;font-size: 1.3em;display:block;position:absolute;left:50%;margin-left:-50px;">run</button>
        </div>
    </div>
    <script>
        setTimeout(function() {
            var log = console.log;
            var display = document.querySelector('#console-result');
            var textarea = document.querySelector('#console-command');
            var runBtn = document.querySelector('#console-run');
            var _console = document.querySelector('#mn-console');
            console.log = function() {
                log.apply(console, arguments);
                var args = [];
                Array.prototype.forEach.call(arguments, function(arg) {
                    if (Object.prototype.toString.call(arg) == "[object Object]") {
                        args.push(JSON.stringify(args))
                    } else {
                        args.push(String(arg))
                    }
                })
                display.innerHTML += (args.join(' ') + '<br>');
                display.scrollTop = display.scrollHeight - display.offsetHeight;
            }
            window.log = console.log;
            window.ua = console.log.bind(null, navigator.userAgent);
            window.rp = function() {
                console.log(location.href);
                console.log(navigator.userAgent);
            };
            window.qs = document.querySelector.bind(document);
            runBtn.onclick = function() {
                var fn = 'with(window){' + textarea.value + '}';
                eval(fn);
                textarea.value = ''
            }
            document.getElementById('console-show-button').onclick = function() {
                _console.style.height = _console.style.height == '0px' ? '66.7%' : '0'
            }
        },10)
    </script>
</c:if>
</body>
</html>
